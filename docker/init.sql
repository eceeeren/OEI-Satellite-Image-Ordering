-- Enable PostGIS
CREATE EXTENSION IF NOT EXISTS postgis;

-- Satellite Images Table
CREATE TABLE satellite_images (
    catalog_id VARCHAR(255) PRIMARY KEY,
    coverage_area GEOMETRY(Polygon, 4326),
    created_at TIMESTAMP NOT NULL
);

-- Orders Table
CREATE TABLE orders (
    id VARCHAR(255) PRIMARY KEY,
    image_id VARCHAR(255) REFERENCES satellite_images(catalog_id),
    price VARCHAR(255) NOT NULL,
    created_at TIMESTAMP NOT NULL
);

-- Insert satellite images data
INSERT INTO satellite_images (catalog_id, coverage_area, created_at) VALUES
(
    '103401008B2340',
    ST_SetSRID(ST_GeomFromGeoJSON('{
        "type": "Polygon",
        "coordinates": [[
            [11.55925345655993, 48.15521738088981],
            [11.558316603320833, 48.15253338175748],
            [11.562201667375433, 48.15208710581413],
            [11.566757031985645, 48.15342932937514],
            [11.566756986040389, 48.156020777339506],
            [11.55925345655993, 48.15521738088981]
        ]]
    }'), 4326),
    '2025-01-30T11:30:00Z'
),
(
    '103401009C2341',
    ST_SetSRID(ST_GeomFromGeoJSON('{
        "type": "Polygon",
        "coordinates": [[
            [11.577356938354256, 48.15319448649555],
            [11.577356938354256, 48.148018936699486],
            [11.584462248183428, 48.148018936699486],
            [11.584462248183428, 48.15319448649555],
            [11.577356938354256, 48.15319448649555]
        ]]
    }'), 4326),
    '2025-01-30T11:30:00Z'
),
(
    '103401009C2342',
    ST_SetSRID(ST_GeomFromGeoJSON('{
        "type": "Polygon",
        "coordinates": [[
            [11.556266508776162, 48.148971936635355],
            [11.555714628302981, 48.14895384618707],
            [11.555168063898273, 48.14889974910117],
            [11.55463208038936, 48.14881016647484],
            [11.554111840616448, 48.148685961220714],
            [11.553612355672218, 48.14852832974954],
            [11.553138436607693, 48.148338790438586],
            [11.55269464807084, 48.14811916899735],
            [11.552285264325416, 48.14787158087177],
            [11.551914228074533, 48.14759841085709],
            [11.551585112485894, 48.14730229011613],
            [11.55130108678462, 48.14698607082483],
            [11.551064885744898, 48.14665279869011],
            [11.550878783373701, 48.146305683604744],
            [11.55074457103923, 48.1459480687229],
            [11.550663540253629, 48.145583398254274],
            [11.55063647027447, 48.1452151842874],
            [11.550663620642855, 48.14484697296203],
            [11.550744728728366, 48.144482310316405],
            [11.550879012302849, 48.14412470813844],
            [11.551065177116435, 48.143777610149606],
            [11.551301429401299, 48.14344435884706],
            [11.55158549318115, 48.14312816332304],
            [11.551914632218466, 48.14283206837106],
            [11.552285676386994, 48.14255892517603],
            [11.552695052214771, 48.14231136387011],
            [11.553138817302955, 48.14209176821786],
            [11.553612698288898, 48.14190225267418],
            [11.554112131987987, 48.141744642035185],
            [11.554632309318508, 48.1416204538776],
            [11.555168221587413, 48.14153088395514],
            [11.555714708692207, 48.14147679469224],
            [11.556266508776162, 48.14145870688546],
            [11.556818308860118, 48.14147679469224],
            [11.557364795964912, 48.14153088395514],
            [11.557900708233817, 48.1416204538776],
            [11.558420885564338, 48.141744642035185],
            [11.558920319263425, 48.14190225267418],
            [11.55939420024937, 48.14209176821786],
            [11.559837965337552, 48.14231136387011],
            [11.560247341165331, 48.14255892517603],
            [11.560618385333859, 48.14283206837106],
            [11.560947524371173, 48.14312816332304],
            [11.561231588151024, 48.14344435884706],
            [11.561467840435888, 48.143777610149606],
            [11.561654005249475, 48.14412470813844],
            [11.561788288823957, 48.144482310316405],
            [11.56186939690947, 48.14484697296203],
            [11.561896547277852, 48.1452151842874],
            [11.561869477298696, 48.145583398254274],
            [11.561788446513095, 48.1459480687229],
            [11.561654234178622, 48.146305683604744],
            [11.561468131807423, 48.14665279869011],
            [11.561231930767702, 48.14698607082483],
            [11.56094790506643, 48.14730229011613],
            [11.56061878947779, 48.14759841085709],
            [11.560247753226907, 48.14787158087177],
            [11.559838369481485, 48.14811916899735],
            [11.559394580944629, 48.148338790438586],
            [11.558920661880105, 48.14852832974954],
            [11.558421176935877, 48.148685961220714],
            [11.557900937162962, 48.14881016647484],
            [11.55736495365405, 48.14889974910117],
            [11.556818389249344, 48.14895384618707],
            [11.556266508776162, 48.148971936635355]
        ]]
    }'), 4326),
    '2025-01-30T11:30:00Z'
),
(
    '103401009C2343',
    ST_SetSRID(ST_GeomFromGeoJSON('{
        "type": "Polygon",
        "coordinates": [[
            [11.59229797044867, 48.146203672489264],
            [11.590146128511691, 48.140300394090445],
            [11.595767999432383, 48.14029982898745],
            [11.598985324357017, 48.146108908846486],
            [11.596318929578928, 48.14826070417044],
            [11.59229797044867, 48.146203672489264]
        ]]
    }'), 4326),
    '2025-02-01T11:30:00Z'
),
(
    '103401009C2344',
    ST_SetSRID(ST_GeomFromGeoJSON('{
        "type": "Polygon",
        "coordinates": [[
            [11.577987778630842, 48.13589662009511],
            [11.577987778630842, 48.129731559392695],
            [11.586155510541715, 48.129731559392695],
            [11.586155510541715, 48.13589662009511],
            [11.577987778630842, 48.13589662009511]
        ]]
    }'), 4326),
    '2025-02-01T11:30:00Z'
),
(
    '103401009C2345',
    ST_SetSRID(ST_GeomFromGeoJSON('{
        "type": "Polygon",
        "coordinates": [[
            [11.54945520213954, 48.133207098055756],
            [11.548794522380355, 48.13318543424033],
            [11.54814020698736, 48.133120651482976],
            [11.54749855897064, 48.13301337383855],
            [11.546875759221429, 48.132864634711694],
            [11.54627780693024, 48.132675866894424],
            [11.54571046176184, 48.132448888754034],
            [11.545179188345907, 48.13218588670473],
            [11.544689103619472, 48.131889394132344],
            [11.54424492752942, 48.131562266976],
            [11.543850937570594, 48.131207656202626],
            [11.54351092759747, 48.130828977440046],
            [11.543228171305914, 48.130429878062266],
            [11.543005390735907, 48.130014202044336],
            [11.5428447300975, 48.129585952926334],
            [11.542747735170423, 48.12914925524342],
            [11.542715338473899, 48.128708314794366],
            [11.54274785034728, 48.12826737813112],
            [11.54284495602503, 48.12783069166016],
            [11.543005718731845, 48.12740246074934],
            [11.543228588765558, 48.126986809234175],
            [11.543511418478081, 48.12658773971309],
            [11.543851483007902, 48.126209095013785],
            [11.544245506562582, 48.1258545212012],
            [11.544689693996565, 48.1255274324828],
            [11.545179767379073, 48.12523097834836],
            [11.545711007199154, 48.12496801325985],
            [11.546278297810854, 48.124741069182726],
            [11.54687617668108, 48.124552331222155],
            [11.547498886966583, 48.12440361659806],
            [11.548140432914893, 48.12429635716084],
            [11.548794637557217, 48.12423158561542],
            [11.54945520213954, 48.1242099255858],
            [11.550115766721866, 48.12423158561542],
            [11.550769971364186, 48.12429635716084],
            [11.5514115173125, 48.12440361659806],
            [11.552034227598003, 48.124552331222155],
            [11.552632106468227, 48.124741069182726],
            [11.553199397079927, 48.12496801325985],
            [11.553730636900008, 48.12523097834836],
            [11.554220710282515, 48.1255274324828],
            [11.5546648977165, 48.1258545212012],
            [11.555058921271177, 48.126209095013785],
            [11.555398985801002, 48.12658773971309],
            [11.555681815513525, 48.126986809234175],
            [11.555904685547238, 48.12740246074934],
            [11.556065448254053, 48.12783069166016],
            [11.556162553931804, 48.12826737813112],
            [11.556195065805182, 48.128708314794366],
            [11.55616266910866, 48.12914925524342],
            [11.556065674181584, 48.129585952926334],
            [11.555905013543173, 48.130014202044336],
            [11.555682232973169, 48.130429878062266],
            [11.555399476681611, 48.130828977440046],
            [11.555059466708489, 48.131207656202626],
            [11.554665476749664, 48.131562266976],
            [11.554221300659611, 48.131889394132344],
            [11.553731215933173, 48.13218588670473],
            [11.553199942517244, 48.132448888754034],
            [11.552632597348842, 48.132675866894424],
            [11.552034645057654, 48.132864634711694],
            [11.551411845308442, 48.13301337383855],
            [11.55077019729172, 48.133120651482976],
            [11.550115881898725, 48.13318543424033],
            [11.54945520213954, 48.133207098055756]
        ]]
    }'), 4326),
    '2025-02-01T11:30:00Z'
);

-- Insert orders data
INSERT INTO orders (id, image_id, price, created_at) VALUES
(
    '6b8f84d-df4e-4d49-b662-bcde71a8764f',
    '103401008B2340',
    '299.99',
    '2025-01-30T10:00:00Z'
),
(
    '604a4960-3140-403d-9681-571c2643761e',
    '103401009C2341',
    '449.99',
    '2025-01-30T11:30:00Z'
);